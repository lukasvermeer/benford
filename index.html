<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
    <title>Benford's Law'</title>
    <meta http-equiv="Content-Language" content="en-us" />
    <meta name="author" content="Lukas Vermeer" />
	<link rel="stylesheet" href="benford.css" type="text/css" />
    <script src="jquery-1.3.2.min.js" type="text/javascript"></script>
    <script src="jgcharts.pack.js" type="text/javascript"></script>
	<script type="text/javascript">	
	<!--
		function drawChart(d) {
			var api = new jGCharts.Api(); 
			var i = jQuery('<img>').attr('src', api.make(d));
			$("#bar").empty().append(i);
		}
	
		$(document).ready(function() {
			$("#data").keyup(function () {
				// source http://en.wikipedia.org/wiki/Benford's_law and added zero for leading zero case.
				var benford = [0,30.1,17.6,12.5,9.7,7.9,6.7,5.8,5.1,4.6];
				// start with empty counts.
				var f = [0,0,0,0,0,0,0,0,0,0];
				// retrieve values from input, strip new lines and split at comma.
				var d = $(this).val().replace(new RegExp( "\\n", "g" ),"").split(",");				
				// count first digits.
				$.each(d, function(i, v) { f[parseInt(v.substring(0,1))]++; });
				// convert to percentage.
				$.each(f, function(i, v) { f[i] = v / d.length * 100; }); 
				// merge our data with Benford's expected values.
				$.each(f, function(i, v) { f[i] = [v, benford[i]]; }); 	
				// zero last, not first.
				f.push(f.shift());
				// draw chart.
				drawChart({data:f, axis_labels : ['1','2','3','4','5','6','7','8','9','0'], legend : ['actual','expected'], bar_width : 9, size: '400x200'});
			}).keyup();
		});
	-->
	</script>

	<script type="text/javascript">

	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-17073322-1']);
	  _gaq.push(['_setDomainName', 'none']);
	  _gaq.push(['_setAllowLinker', true]);
	  _gaq.push(['_trackPageview']);

	  (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();

	</script>
</head>    
<body>
	<h1>Benford's Law</h1>
	<div id="bar" style="height:200px;"></div>
	<div id="datadiv">
		<textarea id="data" rows="4" cols="50">14,586,7,20,50,10,6,11,23,14,118,3,119,586,677,4,35,7,20,22,20,7,40,77,14,542,8,17,51,9,17,37,325,8,500,22,29,34,20,20,20,1905,9,100,18,48,500,70,282,3,9,91,64,28,50,8,8,15,18,2,20,77,14,556,27,325,34,50,25,20,7,16,1894,38,27,20,6,6,7,4,240,35,18,65,2,227,256,483,2,13,50,30,20,36,17,209,15,6,20,145,325,129,22,60,40,1556,77,14,34,65,32,6,42,120,119,3,19,70,20,16,3,20,310,457,1000,10,8,19,7,27,20,66,46,11,20,76,70,117,15,77,14,20,34,325,14,8,10,3,22,9,1563,58,48,44,66,20,2,82,31,20,51,8,1,18,8,20,2,23,2,1000,7,20,20,15,8,2,32,8,30,20,13,77,14,325,11,34,2,2,10,46,5,22,17,29,20,19,1564,4,12,20,2,23,15,7,20,8,12,28,67,7,21,20,15,3,50,72,14,78,25,325,40,31,34,1564,31,7,9,20,22,42,20,5,41,74,5,23,14,39,31,20,11,19,20,7,9,20,2,20,197,12,3,20,17,10,17,15,17,72,14,155,59,325,34,7,3,20,22,19,12,1564,180,180,18,2,10,36,12,60,4,20,27,8,22,20,16,20,18,72,14,20,15,11,325,20,6,35,42,265,1470,22,21,20,33,12,98,100,165,166,7,50,5,16,10,35,15,16,9,13,19,14,20,72,20,3,37,500,15,10,20,14,25,15,325,18,13,13,1100,100,1461,20,22,20,43,5,100,29,9,25,20,28,50,40,6,304,304,2,25,20,11,1,20,15,22,45,72,14,0,85,150,20,17,325,20,44,1000,4,1528,19,22,100,100,9,11,18,19,5,14,500</textarea>
	</div>
	<div id="explain">
		This page was created to compare any dataset to the ratio's predicted by <a href="http://en.wikipedia.org/wiki/Benford's_law">Benford's Law</a>. The default dataset is composed of bank transaction amounts over a period of 16 months. Expected values were taken from Wikipedia.
		<br />
		<br />
		Computations are performed locally. Data you enter will not be transmitted over the internet.
	</div>

	<div id="credits">
		Created by <a href="http://www.lukasvermeer.nl">Lukas Vermeer</a> on May 24th 2010 for <a href="http://lukasvermeer.wordpress.com/2010/05/24/benfords-law/">a post</a> on his <a href="http://lukasvermeer.wordpress.com">blog</a> using <a href="http://jquery.com/">jQuery</a> and <a href="http://www.maxb.net/scripts/jgcharts/include/demo/#">jQuery Google Charts 1.0</a>.
		<p>
    			<a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0 Strict" height="31" width="88" /></a>
		</p>
	</div>
</body>
</html>    
